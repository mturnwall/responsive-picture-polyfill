{"ts":1357342471082,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"(function(global) {\n\tvar start, end;\n\tfunction picture() {}\n\n\tpicture.version = '0.2.1';\n\n\tpicture.load = function() {\n\t\tstart = +new Date();\n\t\tvar versions, i, length, vLength, j;\n\t\tpicture.elements = [];\n\t\tcontainers = document.getElementsByTagName('div');\n\n\t\tfor (i=0, length=containers.length; i < length; i++) {\n\t\t\tif (containers[i].className.match(/picturePolyfill/)) {\n\t\t\t\tpicture.elements.push(\n\t\t\t\t{\n\t\t\t\t\tnode: containers[i],\n\t\t\t\t\talt: containers[i].getAttribute('data-alt'),\n\t\t\t\t\tid: 'picture' + (Math.round(Math.random() * 10000)),\n\t\t\t\t\tsources: []\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfor (i=0, length=picture.elements.length; i < length; i++) {\n\t\t\tversions = picture.elements[i].node.getElementsByTagName('div');\n\t\t\tfor (j=0, vLength=versions.length; j<vLength; j++) {\n\t\t\t\tpicture.elements[i].sources[j] = {\n\t\t\t\t\tsrcset: versions[j].getAttribute('data-srcset'),\n\t\t\t\t\tmedia: versions[j].getAttribute('data-media') || false\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tpicture.resize();\n\t};\n\n\tpicture.loadImage = function(images) {\n\t\tvar img;\n\t\tif (images.length) {\n\t\t\tfor (var i = images.length - 1; i >= 0; i--) {\n\t\t\t\tif (!document.getElementById(images[i].id)) {\n\t\t\t\t\timg = document.createElement('img');\n\t\t\t\t\timg.alt = images[i].alt;\n\t\t\t\t\timg.id = images[i].id;\n\t\t\t\t\tdocument.body.appendChild(img);\n\t\t\t\t\timg.src = images[i].src;\n\t\t\t\t} else {\n\t\t\t\t\tdocument.getElementById(images[i].id).src = images[i].src;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar end =  +new Date();  // log end timestamp\n\t\tvar diff = end - start;\n\t\tconsole.log(diff,' ms');\n\t};\n\n\tpicture.resize = function() {\n\t\tvar images =[], i, j, media, sources, l, sl;\n\t\tfor (i=0, l=picture.elements.length; i<l; i++) {\n\t\t\tsources = picture.elements[i].sources;\n\t\t\tfor (j=0, sl=sources.length; j<sl; j++) {\n\t\t\t\tmedia = sources[j].media;\n\t\t\t\tif (!media || (global.matchMedia && global.matchMedia(media).matches)) {\n\t\t\t\t\timages[i] = {\n\t\t\t\t\t\tsrc: sources[j].srcset,\n\t\t\t\t\t\talt: picture.elements[i].alt,\n\t\t\t\t\t\tid: picture.elements[i].id\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tpicture.loadImage(images);\n\t};\n\n\tif (global.picture) {\n\t\tthrow new Error('picture object already defined');\n\t} else {\n\t\tglobal.picture = picture;\n\t}\n\n\tif (global.addEventListener) {\t// modern browsers\n\t\tglobal.addEventListener('load', picture.load, false);\n\t\tglobal.addEventListener('resize', picture.resize, false);\n\t} else if (global.attachEvent) {\t// lt IE9\n\t\tglobal.attachEvent('onload', picture.load);\n\t}\n\n})(typeof window === 'undefined' ? this : window);\n"]],"start1":0,"start2":0,"length1":0,"length2":2425}]],"length":2425}
{"contributors":[],"silentsave":false,"ts":1357342854938,"patch":[[{"diffs":[[0,"ength, j"],[1,", containers"],[0,";\n\t\tpict"]],"start1":171,"start2":171,"length1":16,"length2":28}]],"length":2437,"saved":false}
